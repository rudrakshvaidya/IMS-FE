<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teams</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT"
      crossorigin="anonymous"
    />
<script>

function storeteamId(teamId) {
  window.location.href = `teamstats.html?id=${teamId}`;
}

async function getTeams() {   
  try {
    const response = await fetch("http://127.0.0.1:8000/teams", {
      headers: {
        "Content-Type": "application/json",
        token: localStorage.getItem("token"),
      },
    });
    const data = await response.json();
    if (response.status === 200) {
      const team = document.getElementById("team");
      team.innerHTML = '<div class="row">';
      for(let i = 0; i < data.length; i++) {
        team.innerHTML += `
          <div class="col-md-4 mb-3">
            <div class="card">
              <img src="${data[i].logo}" class="card-img-top" alt="${data[i].name}">
              <div class="card-body">
                <h5 class="card-title">${data[i].name}</h5>
                <p class="card-text">WINS: ${data[i].win}</p>
                <p class="card-text">Captain: ${data[i].captain}</p>
                <button onclick="storeteamId('${data[i]._id}')" class="btn btn-primary">View</button>
              </div>
            </div>
          </div>`;
      }
      team.innerHTML += '</div>';
    } else {
      document.getElementById("response").textContent = 
        "Bad Request (400): " + JSON.stringify(data);
    }
  } catch (error) {
    document.getElementById("response").textContent = 
      "Error: " + error.message;
  }
}
      getTeams()
      </script>
</head>

<body>

    <h1>teams</h1>
    <p id="response"></p>
    <div id="team">
    </div>    
    
</body>
</html>