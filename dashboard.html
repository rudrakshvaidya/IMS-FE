<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IMS Dashboard</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous" />
  <script>
    async function getRoles() {
      try {
        const response = await fetch("http://127.0.0.1:8000/users/roles", {
          headers: {
            "Content-Type": "application/json",
            token: localStorage.getItem("token"),
          },
        });

        const data = await response.json();

        if (response.status === 200) {
          if (data.teamOwner === false) {
            document.getElementById("OWNERCARD").style.display = "none";
          } else {
            // Set href of owner card dynamically
            const ownerCardLink = document.getElementById("ownerTeamLink");
            ownerCardLink.href = `teammanage.html?id=${data.isOwnerTeamId}`;
          }

          if (data.isAdmin === false) {
            document.getElementById("ADMINCARD").style.display = "none";
          }
        } else {
          document.getElementById("response").textContent =
            "Bad Req(400): " + JSON.stringify(data);
        }
      } catch (error) {
        document.getElementById("response").textContent =
          "Error: " + error.message;
      }
    }

    getRoles();
  </script>
</head>

<body>
  <p id="response"></p>

  <a href="player.html">
    <div class="p-3 text-center bg-body-tertiary">
      <div class="container py-3">
        <h1 class="text-body-emphasis h3">Players</h1>
        <p class="col-lg-6 mx-auto lead small">view and search Players</p>
      </div>
    </div>
  </a>

  <a href="team.html">
    <div class="p-3 text-center bg-body-tertiary">
      <div class="container py-3">
        <h1 class="text-body-emphasis h3">Teams</h1>
        <p class="col-lg-6 mx-auto lead small">view and search teams</p>
      </div>
    </div>
  </a>

  <div id="ADMINCARD" class="p-3 text-center bg-body-tertiary">
    <div class="container py-3">
      <h1 class="text-body-emphasis h3">Manage</h1>
      <p class="col-lg-6 mx-auto lead small">Manage data for ADMIN</p>
    </div>
  </div>

  <a id="ownerTeamLink">
    <div id="OWNERCARD" class="p-3 text-center bg-body-tertiary">
      <div class="container py-3">
        <h1 class="text-body-emphasis h3">Edit Team Details</h1>
        <p class="col-lg-6 mx-auto lead small">
          view and edit teams owned by you
        </p>
      </div>
    </div>
  </a>
  </div>
</body>

</html>